<link rel="import" href="cz-registry.html">
<link rel="import" href="cz-config.html">
<link rel="import" href="cz-review-latency-dash.html">
<link rel="import" href="cz-milestones-dash.html">
<link rel="import" href="cz-review-load-dash.html">
<link rel="import" href="cz-cardview.html">
<link rel="import" href="cz-dashview.html">
<link rel="import" href="cz-calendar-feed-source.html">

<script src="chromez-api.js"></script>

<style>
* {
  font-family: Roboto;
}

body {
  background: #ECEFF1;
  margin: 0;
  overflow: hidden;
  width: 100vw;
  height: 100vh;
}

paper-material, paper-card {
  margin-bottom: 20px;
  margin-right: 20px;
  background: white;
}

.paper-card-0 .card-content {
  padding-top: 0;
}

cz-cardview paper-card {
  margin-bottom: 5px;
}

cz-cardview {
  height: calc(100% - 40px);
}

</style>

<cz-registry>
  <cz-config id=config></cz-config>
</cz-registry>

<cz-dashview id='dash' total-columns=4 columns=2>
  <cz-cardview id='feed' total-columns=4 columns=2></cz-cardview>
</cz-dashview>

<script>
registerSource('cz-config', 'dashes', dashes => dashes.forEach(a => addDash(a, feed)));
registerSource('cz-config', 'cardview-columns', cvColumns => { 
  if (cvColumns) {
    feed.columns = cvColumns;
    feed.totalColumns = Number(cvColumns) + Number(dash.columns);
    dash.totalColumns = Number(cvColumns) + Number(dash.columns);
  }
});
registerSource('cz-config', 'dashview-columns', dvColumns => { 
  if (dvColumns) {
    dash.columns = dvColumns;
    feed.totalColumns = Number(dvColumns) + Number(feed.columns);
    dash.totalColumns = Number(dvColumns) + Number(feed.columns);
  }
});

registerSource('cz-gerrit', {type: 'search', user: 'cmasso@chromium.org'}, data => console.log(data));
</script>

